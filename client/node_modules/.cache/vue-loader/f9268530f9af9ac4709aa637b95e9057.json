{"remainingRequest":"/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/src/components/ChangePassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/src/components/ChangePassword.vue","mtime":1622038821000},{"path":"/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/node_modules/cache-loader/dist/cjs.js","mtime":1622038821000},{"path":"/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/node_modules/babel-loader/lib/index.js","mtime":1622038821000},{"path":"/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/node_modules/cache-loader/dist/cjs.js","mtime":1622038821000},{"path":"/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/node_modules/vue-loader/lib/index.js","mtime":1622038821000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgaW1wb3J0IHVzZXJEYXRhU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy91c2VyRGF0YVNlcnZpY2UiCgogIGV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgIHJldHVybiB7ICAgICAgCiAgICAgICAgdXNlcm5hbWU6ICIiLAogICAgICAgIHBhc3N3b3JkOiIiLAogICAgICAgIAogICAgICAgIG5ld1Bhc3N3b3JkOiIiLAogICAgICAgIGN1cnJlbnRQYXNzd29yZDoiIiwKCiAgICAgICAgc2VlbjogIiIsCiAgICAgICAgdW5zZWVuSW1nOiByZXF1aXJlKCIuLi9hc3NldHMvc2VlMC5wbmciKSwgIAogICAgICAgIHNlZW5JbWc6IHJlcXVpcmUoIi4uL2Fzc2V0cy9zZWUxLnBuZyIpLCAgIAogICAgICAgIHB3ZFR5cGU6IGZhbHNlCiAgICAgIH0KICAgIH0sCiAgCiAgICBtZXRob2RzOiB7CiAgICAgIC8vIHRoZSBmb2xsb3dpbmcgdGhyZWUgZnVuY3Rpb25zIGFyZSB1c2VkIHRvIHN3aXRjaCBleWUgcGljdHVyZQogICAgICAvLyBBbHNvIHN3aXRjaCBzaG93biBwYXNzd29yZCB0eXBlIGFuZCB1bnNob3duIHBhc3N3b3JkIHR5cGUKICAgICAgY2hhbmdlVHlwZTogZnVuY3Rpb24oKSB7CiAgICAgICAgdGhpcy5zZWVuID0gIXRoaXMuc2VlbjsgICAKICAgICAgICB0aGlzLnB3ZFR5cGUgPSAhdGhpcy5wd2RUeXBlOyAgIAogICAgICB9LAogICAgICBob3ZlckV5ZTogZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAgICAgdGhpcy5zZWVuID0gIXRoaXMuc2VlbjsKICAgICAgfSwKICAgICAgb3V0RXllOiBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICB0aGlzLnNlZW4gPSAhdGhpcy5zZWVuOwogICAgICB9LAogICAgICAvLyB0aGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gY2FobmdlIHBhc3N3b3JkLgogICAgICBhc3luYyBwYXNzd29yZENoYW5nZSgpewogICAgICAgCiAgICAgICBsZXQgY29uZmlybWF0aW9uID0gY29uZmlybSgiQ2hhbmdlZCBjb25maXJtZWQ/IikKICAgICAgICBpZihjb25maXJtYXRpb24pewogICAgICBpZih0aGlzLmN1cnJlbnRQYXNzd29yZCAhPSAiIiAmJiB0aGlzLm5ld1Bhc3N3b3JkICE9ICIiKXsKICAgICAgICBsZXQgYmFzZTY0ID0gcmVxdWlyZSgianMtYmFzZTY0IikuQmFzZTY0CiAgICAgICAgdGhpcy51c2VybmFtZSA9IHRoaXMuJGNvb2tpZXMuZ2V0KCd1c2VybmFtZScpOwogICAgICAgIHRoaXMudXNlcm5hbWUgPSBiYXNlNjQuZGVjb2RlKHRoaXMudXNlcm5hbWUpCiAgICAgICAgdGhpcy5wYXNzd29yZCA9IHRoaXMuY3VycmVudFBhc3N3b3JkOwoKICAgICAgICAvL3VzZSBtZDUgdG8gc2F2ZSBwYXNzd29yZAogICAgICAgIC8vIGNoZWNrIHRoZSBvbGQgcGFzc3dvcmQgaXMgY29ycmVjdAogICAgICAgIHZhciByZXN1bHQgPSBhd2FpdCB1c2VyRGF0YVNlcnZpY2UuZ2V0TG9naW5EZXRhaWwodGhpcy51c2VybmFtZSwgdGhpcy4kbWQ1KHRoaXMucGFzc3dvcmQpKTsKICAgICAgICBsZXQgcmVzID0gcmVzdWx0LmRhdGEKICAgICAgICBpZihyZXMuY2hlY2tlZCl7CiAgICAgICAgICAvLyB1cGRhdGUgcGFzc3dvcmQsIHB1dCBuZXcgcGFzc3dvcmQgaW50byBkYXRhYmFzZQogICAgICAgICAgdmFyIGNoYW5nZVJlc3VsdCA9IGF3YWl0IHVzZXJEYXRhU2VydmljZS5jaGFuZ2VQYXNzd29yZCh0aGlzLnVzZXJuYW1lLCB0aGlzLiRtZDUodGhpcy5uZXdQYXNzd29yZCkpOwogICAgICAgICAgbGV0IHJlc3BvbnNlID0gY2hhbmdlUmVzdWx0LmRhdGE7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSkKICAgICAgICAgIC8vIGRpc3BsYXkgdGhlIG1lc3NhZ2UgdG8gcmVtaW5kZXIgdXNlcnMKICAgICAgICAgIGlmKHJlc3BvbnNlLnJlc3VsdC5saXN0Lm5Nb2RpZmllZCA9PTEpewogICAgICAgICAgICAgIGFsZXJ0KCJzdWNjZXNzZnVsbHkgY2hhbmdlZCB5b3VyIHBhc3N3b3JkIik7CiAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICBhbGVydChyZXNwb25zZS5tZXNzYWdlKTsKICAgICAgICAgIH0KICAgICAgICB9ZWxzZXsKICAgICAgICAgIGFsZXJ0KCJUaGUgb2xkIHBhc3N3b3JkIGlzIG5vdCBjb3JyZWN0LCBwbGVhc2UgdHJ5IGFnYWluIikKICAgICAgICB9CiAgICAgIH1lbHNlewogICAgICAgIGFsZXJ0KCJUaGUgY3VycmVudCBwYXNzd29yZCBhbmQgbmV3IHBhc3N3b3JkIGNvdWxkIGJlIGVtcHR5IikKICAgICAgfQogICAgfQoKICAgICAgfSwKICB9Cn07Cg=="},{"version":3,"sources":["ChangePassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"ChangePassword.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <!-- change password page -->\n    <h1>Change Password</h1>\n    Current password:\n    <input class=\"signin\" type=\"text\" v-if=\"pwdType\" v-model=\"currentPassword\" placeholder=\"Enter your password\"/>\n    <input class=\"signin\" type=\"password\" placeholder=\"Enter your password\" v-model=\"currentPassword\" v-else /><br>\n    <br>\n    New Password: \n    <input class=\"signin\" type=\"text\" v-if=\"pwdType\" v-model=\"newPassword\" placeholder=\"Enter your password\"/>\n    <input class=\"signin\" type=\"password\" placeholder=\"Enter your password\" v-model=\"newPassword\" v-else /><br>\n    <br> \n    <img :src=\"seen ? seenImg : unseenImg\" @click=\"changeType()\" v-on:mouseover=\"hoverEye\" v-on:mouseout=\"outEye\" class=\"icon-eye\" />\n    <button type=\"button\" @click=\"passwordChange\">Change</button>\n  </div>\n</template>\n \n<script>\n  import userDataService from \"../services/userDataService\"\n\n  export default {\n    data() {\n      return {      \n        username: \"\",\n        password:\"\",\n        \n        newPassword:\"\",\n        currentPassword:\"\",\n\n        seen: \"\",\n        unseenImg: require(\"../assets/see0.png\"),  \n        seenImg: require(\"../assets/see1.png\"),   \n        pwdType: false\n      }\n    },\n  \n    methods: {\n      // the following three functions are used to switch eye picture\n      // Also switch shown password type and unshown password type\n      changeType: function() {\n        this.seen = !this.seen;   \n        this.pwdType = !this.pwdType;   \n      },\n      hoverEye: function(event) {\n            this.seen = !this.seen;\n      },\n      outEye: function(event) {\n            this.seen = !this.seen;\n      },\n      // this function is used to cahnge password.\n      async passwordChange(){\n       \n       let confirmation = confirm(\"Changed confirmed?\")\n        if(confirmation){\n      if(this.currentPassword != \"\" && this.newPassword != \"\"){\n        let base64 = require(\"js-base64\").Base64\n        this.username = this.$cookies.get('username');\n        this.username = base64.decode(this.username)\n        this.password = this.currentPassword;\n\n        //use md5 to save password\n        // check the old password is correct\n        var result = await userDataService.getLoginDetail(this.username, this.$md5(this.password));\n        let res = result.data\n        if(res.checked){\n          // update password, put new password into database\n          var changeResult = await userDataService.changePassword(this.username, this.$md5(this.newPassword));\n          let response = changeResult.data;\n          console.log(response)\n          // display the message to reminder users\n          if(response.result.list.nModified ==1){\n              alert(\"successfully changed your password\");\n          }else{\n              alert(response.message);\n          }\n        }else{\n          alert(\"The old password is not correct, please try again\")\n        }\n      }else{\n        alert(\"The current password and new password could be empty\")\n      }\n    }\n\n      },\n  }\n};\n</script>\n \n\n<style>\n.icon-eye{\n    height: 30px;\n    width: 30px;\n    position: absolute;\n    left: 38%;\n    top: 48.5%;\n}\n</style>"]}]}