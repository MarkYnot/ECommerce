{"remainingRequest":"/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/src/components/ChangePassword.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/src/components/ChangePassword.vue","mtime":1621868322388},{"path":"/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/node_modules/css-loader/dist/cjs.js","mtime":1620844328000},{"path":"/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1620844328000},{"path":"/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/node_modules/postcss-loader/src/index.js","mtime":1620844328000},{"path":"/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/node_modules/cache-loader/dist/cjs.js","mtime":1620844328000},{"path":"/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/node_modules/vue-loader/lib/index.js","mtime":1620844328000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmljb24tZXllewogICAgaGVpZ2h0OiAzMHB4OwogICAgd2lkdGg6IDMwcHg7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBsZWZ0OiAzOCU7CiAgICB0b3A6IDQ4LjUlOwp9Cg=="},{"version":3,"sources":["ChangePassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChangePassword.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <!-- change password page -->\n    <h1>Change Password</h1>\n    Current password:\n    <input class=\"signin\" type=\"text\" v-if=\"pwdType\" v-model=\"currentPassword\" placeholder=\"Enter your password\"/>\n    <input class=\"signin\" type=\"password\" placeholder=\"Enter your password\" v-model=\"currentPassword\" v-else /><br>\n    <br>\n    New Password: \n    <input class=\"signin\" type=\"text\" v-if=\"pwdType\" v-model=\"newPassword\" placeholder=\"Enter your password\"/>\n    <input class=\"signin\" type=\"password\" placeholder=\"Enter your password\" v-model=\"newPassword\" v-else /><br>\n    <br> \n    <img :src=\"seen ? seenImg : unseenImg\" @click=\"changeType()\" v-on:mouseover=\"hoverEye\" v-on:mouseout=\"outEye\" class=\"icon-eye\" />\n    <button type=\"button\" @click=\"passwordChange\">Change</button>\n  </div>\n</template>\n \n<script>\n  import userDataService from \"../services/userDataService\"\n\n  export default {\n    data() {\n      return {      \n        username: \"\",\n        password:\"\",\n        \n        newPassword:\"\",\n        currentPassword:\"\",\n\n        seen: \"\",\n        unseenImg: require(\"../assets/see0.png\"),  \n        seenImg: require(\"../assets/see1.png\"),   \n        pwdType: false\n      }\n    },\n  \n    methods: {\n      // the following three functions are used to switch eye picture\n      // Also switch shown password type and unshown password type\n      changeType: function() {\n        this.seen = !this.seen;   \n        this.pwdType = !this.pwdType;   \n      },\n      hoverEye: function(event) {\n            this.seen = !this.seen;\n      },\n      outEye: function(event) {\n            this.seen = !this.seen;\n      },\n      // this function is used to cahnge password.\n      async passwordChange(){\n       \n       let confirmation = confirm(\"Changed confirmed?\")\n        if(confirmation){\n      if(this.currentPassword != \"\" && this.newPassword != \"\"){\n        let base64 = require(\"js-base64\").Base64\n        this.username = this.$cookies.get('username');\n        this.username = base64.decode(this.username)\n        this.password = this.currentPassword;\n\n        //use md5 to save password\n        // check the old password is correct\n        var result = await userDataService.getLoginDetail(this.username, this.$md5(this.password));\n        let res = result.data\n        if(res.checked){\n          // update password, put new password into database\n          var changeResult = await userDataService.changePassword(this.username, this.$md5(this.newPassword));\n          let response = changeResult.data;\n          console.log(response)\n          // display the message to reminder users\n          if(response.result.list.nModified ==1){\n              alert(\"successfully changed your password\");\n          }else{\n              alert(response.message);\n          }\n        }else{\n          alert(\"The old password is not correct, please try again\")\n        }\n      }else{\n        alert(\"The current password and new password could be empty\")\n      }\n    }\n\n      },\n  }\n};\n</script>\n \n\n<style>\n.icon-eye{\n    height: 30px;\n    width: 30px;\n    position: absolute;\n    left: 38%;\n    top: 48.5%;\n}\n</style>"]}]}