{"remainingRequest":"/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/src/views/profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/src/views/profile.vue","mtime":1621350247978},{"path":"/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/node_modules/cache-loader/dist/cjs.js","mtime":1620844328000},{"path":"/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/node_modules/babel-loader/lib/index.js","mtime":1620844328000},{"path":"/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/node_modules/cache-loader/dist/cjs.js","mtime":1620844328000},{"path":"/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/node_modules/vue-loader/lib/index.js","mtime":1620844328000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAnLi8uLi9hc3NldHMvY3NzL3Byb2R1Y3QuY3NzJwogCiBpbXBvcnQgcHJvZHVjdERhdGFTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL1Byb2R1Y3REYXRhU2VydmljZSIKaW1wb3J0IFVwZGF0ZVByb2ZpbGUgZnJvbSAnLi4vY29tcG9uZW50cy9VcGRhdGVQcm9maWxlLnZ1ZScKaW1wb3J0IENoYW5nZVBhc3N3b3JkIGZyb20gIi4vLi4vY29tcG9uZW50cy9DaGFuZ2VQYXNzd29yZCIKaW1wb3J0IEFkZExpc3RpbmcgZnJvbSAiLi8uLi9jb21wb25lbnRzL0FkZExpc3RpbmciCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIG1hbmFnZUdvb2RMaXN0OltdLAogICAgICAgICAgICAgICAgc2VsZWN0R29vZExpc3Q6W10sCiAgICAgICAgICAgICAgICB1c2VyaWQ6ICIiLAogICAgICAgICAgICAgICAgcHJvZHVjdGlkOiIiLAogICAgICAgICAgICAgICAgcHJvZmlsZVBhZ2U6IGZhbHNlLAogICAgICAgICAgICAgICAgcGFzc3dvcmRQYWdlOiBmYWxzZSwKICAgICAgICAgICAgICAgIG1hbmFnZUxpc3RQYWdlOiBmYWxzZSwKICAgICAgICAgICAgICAgIGxvZ2luU3RhdGU6IGZhbHNlLAogICAgICAgICAgICAgICAgYWRkUGFnZTogZmFsc2UgICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAKCiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICAgICAKICAgIFVwZGF0ZVByb2ZpbGUsCiAgICBDaGFuZ2VQYXNzd29yZCwKICAgIEFkZExpc3RpbmcKCiAgfSwKICBtb3VudGVkKCl7CiAgICAgdGhpcy51c2VyUHJvZml0KCk7CiAgICAgCiAgfSwKICAKICBtZXRob2RzOiB7CiAgICB1c2VyUHJvZml0KCl7CiAgICAgIHRoaXMucHJvZmlsZVBhZ2UgPSB0cnVlOwogICAgICB0aGlzLnBhc3N3b3JkUGFnZSA9IGZhbHNlOwogICAgICB0aGlzLm1hbmFnZUxpc3RQYWdlID0gZmFsc2U7CiAgICAgIHRoaXMuYWRkUGFnZSA9IGZhbHNlOwogICAgfSwKCiAgICBjaGFuZ2VQYXNzd29yZCgpewoKICAgICAgdGhpcy5wcm9maWxlUGFnZSA9IGZhbHNlOwogICAgICB0aGlzLnBhc3N3b3JkUGFnZSA9IHRydWU7CiAgICAgIHRoaXMubWFuYWdlTGlzdFBhZ2UgPSBmYWxzZTsKICAgICAgdGhpcy5hZGRQYWdlID0gZmFsc2U7CiAgICB9LAoKICAgIGxvZ291dCgpewogICAgICAgdGhpcy4kY29va2llcy5yZW1vdmUoImZpcnN0bmFtZSIpCiAgICAgICB0aGlzLiRjb29raWVzLnJlbW92ZSgibGFzdG5hbWUiKQogICAgICAgdGhpcy4kY29va2llcy5yZW1vdmUoInVzZXJuYW1lIikKICAgICAgIHRoaXMuJGNvb2tpZXMucmVtb3ZlKCJzdGF0ZSIpOwogICAgICAgIHRoaXMuJGNvb2tpZXMucmVtb3ZlKCJ1c2VyaWQiKTsKICAgICAgIAogICAgfSwKCgogICAgYXN5bmMgbWFuYWdlTGlzdCgpewogICAgICB0aGlzLnByb2ZpbGVQYWdlID0gZmFsc2U7CiAgICAgIHRoaXMucGFzc3dvcmRQYWdlID0gZmFsc2U7CiAgICAgIHRoaXMubWFuYWdlTGlzdFBhZ2UgPSB0cnVlOwogICAgICB0aGlzLnVzZXJpZCA9IHRoaXMuJGNvb2tpZXMuZ2V0KCJ1c2VyaWQiKQogICAgICB2YXIgcmVzdWx0ID0gYXdhaXQgcHJvZHVjdERhdGFTZXJ2aWNlLmdldFVzZXJQcm9kdWN0cyh0aGlzLnVzZXJpZCk7CiAgICAgIHZhciByZXMgPSByZXN1bHQuZGF0YTsKICAgICAgdmFyIHByb2R1Y3RMaXN0ID0gcmVzLnJlc3VsdC5saXN0OwogICAgIHRoaXMubWFuYWdlR29vZExpc3QgPSBwcm9kdWN0TGlzdDsKICAgICAKfSwKICAgYXN5bmMgY2hhbmdlQWJsZWQodGl0bGUpewogICAgICB2YXIgcmVzcG9uc2UgPSBhd2FpdCBwcm9kdWN0RGF0YVNlcnZpY2UuZ2V0SXRlbURldGFpbCh0aXRsZSkKICAgICAgICAgdGhpcy5zZWxlY3RHb29kTGlzdCA9IHJlc3BvbnNlLmRhdGEKICAgICAgICAgaWYodGhpcy5zZWxlY3RHb29kTGlzdC5pdGVtLnN0b2NrID09IDApewogICAgICAgICAgIGFsZXJ0KCJ0aGUgc3RvY2sgaXMgMCwgc28gaXQgY2FuIG9ubHkgYmUgdW5hdmFpbGFibGUiKQogICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICB9ZWxzZXsKICAgICAgICB0aGlzLnByb2R1Y3RpZCA9IHRoaXMuc2VsZWN0R29vZExpc3QuaXRlbS5faWQKICAgICAgICB2YXIgYWJsZWRSZXN1bHQgPSBhd2FpdCBwcm9kdWN0RGF0YVNlcnZpY2UuYWJsZVByb2R1Y3QodGhpcy5wcm9kdWN0aWQpIAogICAgICAgIHZhciByZXNwb25zZSA9IGFibGVkUmVzdWx0LmRhdGEKICAgICAgICBpZihyZXNwb25zZS5yZXN1bHQubGlzdC5uTW9kaWZpZWQgPT0xKXsKICAgICAgICAgICAgICAgICBhbGVydCgiVGhlIHByb2R1Y3QgaXMgYXZhaWxibGUgbm93ICBhbmQgd2lsbCBzaG93IGluIHRoZSBzdG9yZSIpCiAgICAgICAgICAgIH0KICAgICAgICAgfQogICAgfSwKICAgICAgYXN5bmMgY2hhbmdlRGlzYWJsZWQodGl0bGUpewogICAgICAgIHZhciByZXNwb25zZSA9IGF3YWl0IHByb2R1Y3REYXRhU2VydmljZS5nZXRJdGVtRGV0YWlsKHRpdGxlKQogICAgICAgICB0aGlzLnNlbGVjdEdvb2RMaXN0ID0gcmVzcG9uc2UuZGF0YQogICAgICAgICB0aGlzLnByb2R1Y3RpZCA9IHRoaXMuc2VsZWN0R29vZExpc3QuaXRlbS5faWQKICAgICAgICAgdmFyIGRpc2FibGVkUmVzdWx0ID0gYXdhaXQgcHJvZHVjdERhdGFTZXJ2aWNlLmRpc2FibGVQcm9kdWN0KHRoaXMucHJvZHVjdGlkKQogICAgICAgICAgdmFyIHJlc3BvbnNlID0gZGlzYWJsZWRSZXN1bHQuZGF0YQogICAgICAgICAgICBpZihyZXNwb25zZS5yZXN1bHQubGlzdC5uTW9kaWZpZWQgPT0xKXsKICAgICAgICAgICAgICAgICBhbGVydCgiVGhlIHByb2R1Y3QgaXMgZGlzYWJsZWQgYW5kIHdpbGwgbm90IHNob3cgaW4gdGhlIHN0b3JlIikKICAgICAgICAgICAgfQogICAgICAgICAgIAogICAgICB9LAoKICAgICAgICBhZGRMaXN0aW5nUGFnZSgpewogICAgICAgICAgICAgaWYodGhpcy4kY29va2llcy5nZXQoImZpcnN0bmFtZSIpKXsKICAgICAgICAgICAgIHRoaXMucHJvZmlsZVBhZ2UgPSBmYWxzZQogICAgICAgICAgICAgdGhpcy5wYXNzd29yZFBhZ2UgPSBmYWxzZQogICAgICAgICAgICAgdGhpcy5tYW5hZ2VMaXN0UGFnZSA9IGZhbHNlCiAgICAgICAgICAgICB0aGlzLmFkZFBhZ2UgPSB0cnVlCiAgICAgICAgfWVsc2V7CgogICAgICAgICAgICAgIGFsZXJ0KCJwbGVhc2UgbG9naW4gZmlyc3QiKQogICAgICAgIH0KICAgICAgICAgIH0sCgogICAgICBhc3luYyBkZWxldGVVc2VyUHJvZHVjdCh0aXRsZSl7CiAgICAgICAgIHZhciByZXNwb25zZSA9IGF3YWl0IHByb2R1Y3REYXRhU2VydmljZS5nZXRJdGVtRGV0YWlsKHRpdGxlKQogICAgICAgICB0aGlzLnNlbGVjdEdvb2RMaXN0ID0gcmVzcG9uc2UuZGF0YQogICAgICAgICB0aGlzLnByb2R1Y3RpZCA9IHRoaXMuc2VsZWN0R29vZExpc3QuaXRlbS5faWQKICAgICAgICAgCgogICAgICAgIHZhciBkZWxldGVSZXN1bHQgPSBhd2FpdCBwcm9kdWN0RGF0YVNlcnZpY2UuZGVsZXRlVXNlclByb2R1Y3QodGhpcy5wcm9kdWN0aWQpCiAgICAgICAgdmFyIHJlcyA9IGRlbGV0ZVJlc3VsdC5kYXRhCiAgICAgICAgaWYocmVzLnJlc3VsdC5saXN0LmRlbGV0ZWRDb3VudCAhPT0gMCl7CiAgICAgICAgICAgICAgICAgYWxlcnQoIkRlbGV0ZSBzdWNjdWVzc2Z1bCIpOwogICAgICAgICAgICAgICAgIHRoaXMubWFuYWdlTGlzdCgpOwogICAgICAgICAgICB9CiAgICAgIH0KCgogICAgfQoKCn0KCgo="},{"version":3,"sources":["profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA","file":"profile.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<div>\n  <div class=\"NavBar\">\n    <el-scrollbar class=\"scrollbar-wrapper\">\n      <el-menu\n        default-active=\"1\"\n        class=\"el-menu-vertical-demo\"\n       \n        background-color=\"white\"  \n        text-color=\"black\"\n        active-text-color=\"#ffd04b\">\n        \n        <el-menu-item index=\"1\" @click=\"userProfit\">\n       \n          <span slot=\"title\">User profit</span>\n        </el-menu-item>\n        <el-menu-item index=\"2\" @click=\"changePassword\">\n           <span slot=\"title\">Change Password</span>\n        </el-menu-item>\n     \n      <el-menu-item index=\"3\" @click=\"manageList\">\n           <span slot=\"title\">Manage Listing</span>\n          </el-menu-item>\n        </el-menu>\n    \n    </el-scrollbar>\n      \n        <router-link to=\"/\">\n          <button class =\"button\" @click=\"logout\">Log out</button>\n        </router-link>\n  </div>\n\n     <!-- update profile page -->\n    <div class=\"display-Window\" v-if=\"profilePage\">\n        <UpdateProfile></UpdateProfile>\n        </div> \n\n        <!-- change password page -->\n        <div class=\"display-Window\" v-if=\"passwordPage\">\n         <ChangePassword></ChangePassword>\n        </div> \n\n        <!-- manage List page -->\n      <div v-if=\"manageListPage\">\n         \n          <button @click=\"addListingPage\">Add</button>\n        \n          <div class=\"container\">\n             <div class=\"accessory-result\"> \n               <div class=\"accessory-list-wrap\">\n                 <div class=\"accessory-list col-4\">\n                   <ul>\n                      <li v-for=\"item in manageGoodList\">\n                        <div class=\"pic\">\n                      \n                           <a href=\"#\"><img v-lazy=\"'/static/'+item.image\" alt=\"\"> </a>\n                       </div>\n                              <div class=\"main\">\n                                  <div class=\"name\">{{item.title}}</div>\n                                   <div class=\"price\">{{item.price}}</div>\n                                    <div>\n                        <a href=\"javascript:;\"  class=\"ableButton\" @click=\"changeAbled(item.title)\" >Able</a>\n                        <a href=\"javascript:;\"  class=\"disableButton\"  @click=\"changeDisabled(item.title)\">Disabled</a>\n                        <a href=\"javascript:;\"  class=\"deleteButton\" @click=\"deleteUserProduct(item.title)\">delete</a>\n                      </div>\n                      \n                            </div>\n                     </li>\n                   </ul>\n                 </div>\n               </div>\n             </div>\n           </div>  \n        </div> \n        \n         <!-- add page -->\n         <div class=\"display-Window\" v-if=\"addPage\">\n            <AddListing></AddListing>\n         </div>\n\n       <!-- vertical line to seperate the window -->\n       <div class=\"verticalBar\"></div>\n\n</div>\n</template>\n \n<script>\nimport './../assets/css/product.css'\n \n import productDataService from \"../services/ProductDataService\"\nimport UpdateProfile from '../components/UpdateProfile.vue'\nimport ChangePassword from \"./../components/ChangePassword\"\nimport AddListing from \"./../components/AddListing\"\nexport default {\n  data() {\n    return {\n                manageGoodList:[],\n                selectGoodList:[],\n                userid: \"\",\n                productid:\"\",\n                profilePage: false,\n                passwordPage: false,\n                manageListPage: false,\n                loginState: false,\n                addPage: false               \n\n             \n\n    }\n  },\n  components: {\n       \n    UpdateProfile,\n    ChangePassword,\n    AddListing\n\n  },\n  mounted(){\n     this.userProfit();\n     \n  },\n  \n  methods: {\n    userProfit(){\n      this.profilePage = true;\n      this.passwordPage = false;\n      this.manageListPage = false;\n      this.addPage = false;\n    },\n\n    changePassword(){\n\n      this.profilePage = false;\n      this.passwordPage = true;\n      this.manageListPage = false;\n      this.addPage = false;\n    },\n\n    logout(){\n       this.$cookies.remove(\"firstname\")\n       this.$cookies.remove(\"lastname\")\n       this.$cookies.remove(\"username\")\n       this.$cookies.remove(\"state\");\n        this.$cookies.remove(\"userid\");\n       \n    },\n\n\n    async manageList(){\n      this.profilePage = false;\n      this.passwordPage = false;\n      this.manageListPage = true;\n      this.userid = this.$cookies.get(\"userid\")\n      var result = await productDataService.getUserProducts(this.userid);\n      var res = result.data;\n      var productList = res.result.list;\n     this.manageGoodList = productList;\n     \n},\n   async changeAbled(title){\n      var response = await productDataService.getItemDetail(title)\n         this.selectGoodList = response.data\n         if(this.selectGoodList.item.stock == 0){\n           alert(\"the stock is 0, so it can only be unavailable\")\n             return;\n         }else{\n        this.productid = this.selectGoodList.item._id\n        var abledResult = await productDataService.ableProduct(this.productid) \n        var response = abledResult.data\n        if(response.result.list.nModified ==1){\n                 alert(\"The product is availble now  and will show in the store\")\n            }\n         }\n    },\n      async changeDisabled(title){\n        var response = await productDataService.getItemDetail(title)\n         this.selectGoodList = response.data\n         this.productid = this.selectGoodList.item._id\n         var disabledResult = await productDataService.disableProduct(this.productid)\n          var response = disabledResult.data\n            if(response.result.list.nModified ==1){\n                 alert(\"The product is disabled and will not show in the store\")\n            }\n           \n      },\n\n        addListingPage(){\n             if(this.$cookies.get(\"firstname\")){\n             this.profilePage = false\n             this.passwordPage = false\n             this.manageListPage = false\n             this.addPage = true\n        }else{\n\n              alert(\"please login first\")\n        }\n          },\n\n      async deleteUserProduct(title){\n         var response = await productDataService.getItemDetail(title)\n         this.selectGoodList = response.data\n         this.productid = this.selectGoodList.item._id\n         \n\n        var deleteResult = await productDataService.deleteUserProduct(this.productid)\n        var res = deleteResult.data\n        if(res.result.list.deletedCount !== 0){\n                 alert(\"Delete succuessful\");\n                 this.manageList();\n            }\n      }\n\n\n    }\n\n\n}\n\n\n</script>\n \n<style>\n.scrollbar-wrapper {\n      height: 100%;\n      overflow-x: hidden !important;\n      /* overflow-y: scroll */\n}\n\n.NavBar{\n     \n      position: relative;\n      top:200px;\n     width:15%;\n     height:100%;\n     float:left;\n     padding:0 21px;\n     line-height:500px;\n\n}\n\n.verticalBar {\n        position: absolute; \n        left:153px;\n        top:0.01px;\n        width: 2px;\n        height: 630px;\n        background: grey;\n        display: inline-block;\n        margin-top: 31px;\n        vertical-align: top;\n        margin-right: 29px;\n        margin-left: 22px;\n    }\n\n.display-Window{\n       position: relative;\n       left:400px;\n       top:200px;\n       width: 100%;\n       height: 100%;\n }\n\n .button{\n    position: absolute;\n    top:-60px;\n    left:50px;\n\n }\n\n .deleteButton{\n     position: relative;\n     left:30px;\n      top:4px;\n      font: black;\n }\n\n\n.ableButton{\n     position: relative;\n     left:0px;\n      top:-90px;\n\n}\n \n.disableButton{\n     position: relative;\n     left:60px;\n      top:-90px;\n\n}\n \n\n\n\n</style>\n\n"]}]}