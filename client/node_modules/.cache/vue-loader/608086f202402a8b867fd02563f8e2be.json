{"remainingRequest":"/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/src/views/logIn.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/src/views/logIn.vue","mtime":1621864070763},{"path":"/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/node_modules/cache-loader/dist/cjs.js","mtime":1620844328000},{"path":"/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/node_modules/babel-loader/lib/index.js","mtime":1620844328000},{"path":"/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/node_modules/cache-loader/dist/cjs.js","mtime":1620844328000},{"path":"/Users/mark/Desktop/Master/web-development/assignment2/Ecommerce/client/node_modules/vue-loader/lib/index.js","mtime":1620844328000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB1c2VyRGF0YVNlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvdXNlckRhdGFTZXJ2aWNlIgppbXBvcnQgVG9wQmFyIGZyb20gIi4uL2NvbXBvbmVudHMvVG9wQmFyIgpleHBvcnQgZGVmYXVsdHsKICAgIG5hbWU6ICJsb2dpbl9wYWdlIiwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBUb3BCYXIKICAgIH0sCiAgICBkYXRhKCl7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgICB1c2VybmFtZTogIiIsCiAgICAgICAgICAgIHBhc3N3b3JkOiAiIiwKICAgICAgICAgICAgZGF0YTogW10sCiAgICAgICAgICAgIHNlZW46ICIiLAogICAgICAgICAgICB1bnNlZW5JbWc6IHJlcXVpcmUoIi4uL2Fzc2V0cy9zZWUwLnBuZyIpLCAgCiAgICAgICAgICAgIHNlZW5JbWc6IHJlcXVpcmUoIi4uL2Fzc2V0cy9zZWUxLnBuZyIpLCAgIAogICAgICAgICAgICBwd2RUeXBlOiBmYWxzZQoKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGNoYW5nZVR5cGU6IGZ1bmN0aW9uKCkgewogICAgICAgIHRoaXMuc2VlbiA9ICF0aGlzLnNlZW47ICAgLy9jaGFuZ2UgdGhlIHZpZXcgb2YgZXllIHN5bWJvbCAKICAgICAgICB0aGlzLnB3ZFR5cGUgPSAhdGhpcy5wd2RUeXBlOyAgIAogICAgICAgIH0sCiAgICAgICAgaG92ZXJFeWU6IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIHRoaXMuc2VlbiA9ICF0aGlzLnNlZW47CiAgICAgICAgfSwKICAgICAgICBvdXRFeWU6IGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIHRoaXMuc2VlbiA9ICF0aGlzLnNlZW47CiAgICAgICAgfSwKCiAgICAvL3JlcXVlc3QgdGhlIHVzZXIgZGF0YSBmcm9tIGJhY2tlbmQgYW5kIHVzZSBtcDUgdG8gc2VjdXJlIHRoZSBzZW5zaXRpdmUgdXNlciBpbmZvbWF0aW9uCiAgICAgICAgYXN5bmMgdXNlckxvZ2luKCl7CiAgICAgICAgICAgIGlmKHRoaXMucGFzc3dvcmQgPT0gIiIgfHwgdGhpcy51c2VybmFtZSA9PSAiIil7CiAgICAgICAgICAgICAgICBhbGVydCgiUGFzc3dvcmQgYW5kIHVzZXJuYW1lIGNhbm5vdCBiZSBlbXB0eSIpCiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gYXdhaXQgdXNlckRhdGFTZXJ2aWNlLmdldExvZ2luRGV0YWlsKHRoaXMudXNlcm5hbWUsIHRoaXMuJG1kNSh0aGlzLnBhc3N3b3JkKSkKICAgICAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5kYXRhLmRhdGEKICAgICAgICAgICAgbGV0IGJhc2U2NCA9IHJlcXVpcmUoImpzLWJhc2U2NCIpLkJhc2U2NAogICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICBpZih0aGlzLmRhdGEuY2hlY2tlZCl7CiAgICAgICAgICAgICAgICAgICAgbGV0IGZpcnN0bmFtZSA9IGJhc2U2NC5lbmNvZGUodGhpcy5kYXRhLnVzZXJbMF0uZmlyc3RuYW1lKQogICAgICAgICAgICAgICAgICAgIGxldCBsYXN0bmFtZSA9IGJhc2U2NC5lbmNvZGUodGhpcy5kYXRhLnVzZXJbMF0ubGFzdG5hbWUpCiAgICAgICAgICAgICAgICAgICAgbGV0IHVzZXJuYW1lID0gYmFzZTY0LmVuY29kZSh0aGlzLmRhdGEudXNlclswXS5lbWFpbCkKICAgICAgICAgICAgICAgICAgICBsZXQgdXNlcmlkID0gYmFzZTY0LmVuY29kZSh0aGlzLmRhdGEudXNlclswXS5faWQpCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kY29va2llcy5zZXQoImZpcnN0bmFtZSIsIGZpcnN0bmFtZSwgIjMwbWluIik7IC8vYXN2ZSBpbmZvIGludG8gY29va2llIHdpdGggYmFzZTY0IGVuY29kZSB0byBlbmhhbmNlIHRoZSBzZWN1cml0eS4gCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kY29va2llcy5zZXQoImxhc3RuYW1lIixsYXN0bmFtZSwiMzBtaW4iKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRjb29raWVzLnNldCgic3RhdGUiLCB0cnVlLCIzMG1pbiIpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJGNvb2tpZXMuc2V0KCJ1c2VybmFtZSIsIHVzZXJuYW1lLCIzMG1pbiIpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJGNvb2tpZXMuc2V0KCJ1c2VyaWQiLCB1c2VyaWQsICIzMG1pbiIpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOiAiLyJ9KQogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQodGhpcy5kYXRhLm1lc3NhZ2UpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH1jYXRjaChlcnIpewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKQogICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["logIn.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"logIn.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div>\n        <TopBar>\n        <div slot=\"title\">\n            <router-link to=\"/\"><button id=\"button\">PhoneZone</button></router-link>    \n        </div>\n\n        </TopBar>\n<!--     login page -->\n        <div  id=\"login\">\n        <h1>Login Page</h1> \n            <input type=\"text\" placeholder=\"Enter your username(email)\" v-model=\"username\">\n            <input type=\"text\" v-if=\"pwdType\" v-model=\"password\" placeholder=\"Enter your password\"/>\n            <input type=\"password\" placeholder=\"Enter your password\" v-model=\"password\" v-else />\n            <button class=\"login\" type=\"button\" @click=\"userLogin\">Log in</button>\n            <router-link to=\"/signIn\">Don't have account yet? Sign in Right now</router-link>\n        </div>\n        <img :src=\"seen ? seenImg : unseenImg\" @click=\"changeType()\" v-on:mouseover=\"hoverEye\" v-on:mouseout=\"outEye\" class=\"icon-eye\" />\n    </div>\n</template>\n\n<script>\n    import userDataService from \"../services/userDataService\"\n    import TopBar from \"../components/TopBar\"\n    export default{\n        name: \"login_page\",\n        components: {\n            TopBar\n        },\n        data(){\n            return{\n                username: \"\",\n                password: \"\",\n                data: [],\n                seen: \"\",\n                unseenImg: require(\"../assets/see0.png\"),  \n                seenImg: require(\"../assets/see1.png\"),   \n                pwdType: false\n\n            }\n        },\n        methods: {\n            changeType: function() {\n            this.seen = !this.seen;   //change the view of eye symbol \n            this.pwdType = !this.pwdType;   \n            },\n            hoverEye: function(event) {\n                this.seen = !this.seen;\n            },\n            outEye: function(event) {\n                this.seen = !this.seen;\n            },\n\n        //request the user data from backend and use mp5 to secure the sensitive user infomation\n            async userLogin(){\n                if(this.password == \"\" || this.username == \"\"){\n                    alert(\"Password and username cannot be empty\")\n                }else{\n                    this.data = await userDataService.getLoginDetail(this.username, this.$md5(this.password))\n                this.data = this.data.data\n                let base64 = require(\"js-base64\").Base64\n                try{\n                    if(this.data.checked){\n                        let firstname = base64.encode(this.data.user[0].firstname)\n                        let lastname = base64.encode(this.data.user[0].lastname)\n                        let username = base64.encode(this.data.user[0].email)\n                        let userid = base64.encode(this.data.user[0]._id)\n                        this.$cookies.set(\"firstname\", firstname, \"30min\"); //asve info into cookie with base64 encode to enhance the security. \n                        this.$cookies.set(\"lastname\",lastname,\"30min\");\n                        this.$cookies.set(\"state\", true,\"30min\");\n                        this.$cookies.set(\"username\", username,\"30min\");\n                        this.$cookies.set(\"userid\", userid, \"30min\");\n                        this.$router.push({path: \"/\"})\n                    }else{\n                        alert(this.data.message)\n                    }\n                }catch(err){\n                    console.log(err)\n                }\n                }\n                \n            }\n        }\n    }\n</script>\n\n<style scoped>\n#login{\n    text-align: center; \n\tbackground-color: #fff;\n\tborder-radius: 20px;\n\twidth: 300px;\n\theight: 350px;\n\tmargin: auto;\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n    display: grid;\n    grid-template-rows: auto;\n    grid-row-gap: 5px;\n}\n\n.login{\n    margin-top: 5px;\n}\n\n.icon-eye{\n    height: 30px;\n    width: 30px;\n    position: absolute;\n    left: 63%;\n    top: 48.5%;\n}\n\n#button{\n    font-size: 35px;\n    color: black;\n    background: white;\n    position: absolute;\n    top: -15px;\n  }\n</style>"]}]}