{"remainingRequest":"/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/node_modules/babel-loader/lib/index.js!/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/src/views/cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/src/views/cart.vue","mtime":1622038821000},{"path":"/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/node_modules/cache-loader/dist/cjs.js","mtime":1622038821000},{"path":"/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/node_modules/babel-loader/lib/index.js","mtime":1622038821000},{"path":"/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/node_modules/cache-loader/dist/cjs.js","mtime":1622038821000},{"path":"/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/node_modules/vue-loader/lib/index.js","mtime":1622038821000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tYXJrL0Rlc2t0b3AvSm9iLWh1bnRpbmcvXHU1MDVBXHU4RkM3XHU3Njg0XHU5ODc5XHU3NkVFL3Bob25lLXNhbGVzL2NsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBCYWNrQnV0dG9uIGZyb20gIi4vLi4vY29tcG9uZW50cy9CYWNrQnV0dG9uLnZ1ZSI7CmltcG9ydCB1c2VyRGF0YVNlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvdXNlckRhdGFTZXJ2aWNlIjsKaW1wb3J0IFByb2R1Y3REYXRhU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy9Qcm9kdWN0RGF0YVNlcnZpY2UiOyAvLyBwcm9kdWN0IFVSTCByZXF1ZXN0CgpleHBvcnQgZGVmYXVsdCB7CiAgaW5qZWN0OiBbJ3JlbG9hZCddLAogIG5hbWU6ICJjYXJ0IiwKICBjb21wb25lbnRzOiB7CiAgICBCYWNrQnV0dG9uOiBCYWNrQnV0dG9uCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZW1haWw6ICIiLAogICAgICBmaXJzdG5hbWU6ICIiLAogICAgICBsYXN0bmFtZTogIiIsCiAgICAgIGNhcnRJdGVtczogW10sCiAgICAgIGxvZ2luU3RhdGU6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNvbXB1dGVkUHJpY2U6IGZ1bmN0aW9uIGNvbXB1dGVkUHJpY2UoKSB7CiAgICAgIHZhciBtb25leSA9IDA7CiAgICAgIHRoaXMuY2FydEl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBtb25leSArPSBwYXJzZUZsb2F0KGl0ZW0ucHJpY2UpICogcGFyc2VJbnQoaXRlbS5hZGRRdWFudGl0eSk7CiAgICAgIH0pOwogICAgICByZXR1cm4gbW9uZXk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRVc2VyRGV0YWlsOiBmdW5jdGlvbiBnZXRVc2VyRGV0YWlsKCkgewogICAgICB2YXIgYmFzZTY0ID0gcmVxdWlyZSgianMtYmFzZTY0IikuQmFzZTY0OwoKICAgICAgdGhpcy5maXJzdG5hbWUgPSB0aGlzLiRjb29raWVzLmdldCgiZmlyc3RuYW1lIik7CiAgICAgIHRoaXMubGFzdG5hbWUgPSB0aGlzLiRjb29raWVzLmdldCgibGFzdG5hbWUiKTsKICAgICAgdGhpcy5lbWFpbCA9IHRoaXMuJGNvb2tpZXMuZ2V0KCJ1c2VybmFtZSIpOwogICAgICB0aGlzLmZpcnN0bmFtZSA9IGJhc2U2NC5kZWNvZGUodGhpcy5maXJzdG5hbWUpOwogICAgICB0aGlzLmxhc3RuYW1lID0gYmFzZTY0LmRlY29kZSh0aGlzLmxhc3RuYW1lKTsKICAgICAgdGhpcy5lbWFpbCA9IGJhc2U2NC5kZWNvZGUodGhpcy5lbWFpbCk7CiAgICAgIHRoaXMubG9naW5TdGF0ZSA9IHRoaXMuJGNvb2tpZXMuZ2V0KCJzdGF0ZSIpOyAvLyBjb25zb2xlLmxvZyh0aGlzLmZpcnN0bmFtZSk7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZW1haWwpOwogICAgfSwKICAgIGdldENhcnRJdGVtczogZnVuY3Rpb24gZ2V0Q2FydEl0ZW1zKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiB1c2VyRGF0YVNlcnZpY2UuZ2V0Q2FydExpc3QoX3RoaXMuZmlyc3RuYW1lLCBfdGhpcy5sYXN0bmFtZSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGRhdGEgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX3RoaXMuY2FydEl0ZW1zID0gZGF0YS5kYXRhLmNhcnRsaXN0OwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgcmVtb3ZlSXRlbTogZnVuY3Rpb24gcmVtb3ZlSXRlbShwcm9kdWN0VGl0bGUpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9kdWN0VGl0bGUpOwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJEYXRhU2VydmljZS5kZWxldGVJdGVtKF90aGlzMi5maXJzdG5hbWUsIF90aGlzMi5sYXN0bmFtZSwgcHJvZHVjdFRpdGxlKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT0gIjAiKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJkZWxldGUgc3VjYyIpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMyLmdldENhcnRJdGVtcygpOwogICAgICAgICAgICAgICAgfSAvL3RoaXMuJHJvdXRlci5nbygwKTsKCgogICAgICAgICAgICAgICAgX3RoaXMyLnJlbG9hZCgpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBlZGl0Q2FydDogZnVuY3Rpb24gZWRpdENhcnQoZmxhZywgaXRlbSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBlZGl0TnVtYmVyLCBwcm9kdWN0VGl0bGUsIHJlcywgX3JlcywgX3JlczI7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBlZGl0TnVtYmVyID0gaXRlbS5hZGRRdWFudGl0eTsKICAgICAgICAgICAgICAgIHByb2R1Y3RUaXRsZSA9IGl0ZW0udGl0bGU7CgogICAgICAgICAgICAgICAgaWYgKCEoZmxhZyA9PSAnbWludXMnICYmIGl0ZW0uYWRkUXVhbnRpdHkgPj0gMikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZWRpdE51bWJlci0tOyAvL3RoaXMucmVsb2FkKCk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJEYXRhU2VydmljZS51cGRhdGVJdGVtTnVtYmVyKF90aGlzMy5maXJzdG5hbWUsIF90aGlzMy5sYXN0bmFtZSwgaXRlbS50aXRsZSwgZWRpdE51bWJlcik7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09ICIwIikgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidXBkYXRlIHN1Y2MiKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMy5nZXRDYXJ0SXRlbXMoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDIzOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBpZiAoIShmbGFnID09ICdhZGQnICYmIGl0ZW0uc3RvY2sgPiBpdGVtLmFkZFF1YW50aXR5KSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBlZGl0TnVtYmVyKys7IC8vdGhpcy5yZWxvYWQoKTsKCiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJEYXRhU2VydmljZS51cGRhdGVJdGVtTnVtYmVyKF90aGlzMy5maXJzdG5hbWUsIF90aGlzMy5sYXN0bmFtZSwgaXRlbS50aXRsZSwgZWRpdE51bWJlcik7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBfcmVzID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKF9yZXMuc3RhdHVzID09ICIwIikgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidXBkYXRlIHN1Y2MiKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMy5nZXRDYXJ0SXRlbXMoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDIzOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICBpZiAoIShmbGFnID09ICdtaW51cycgJiYgaXRlbS5hZGRRdWFudGl0eSA9PSAxKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDIzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJEYXRhU2VydmljZS5kZWxldGVJdGVtKF90aGlzMy5maXJzdG5hbWUsIF90aGlzMy5sYXN0bmFtZSwgcHJvZHVjdFRpdGxlKTsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgIF9yZXMyID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKF9yZXMyLnN0YXR1cyA9PSAiMCIpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coImRlbGV0ZSBzdWNjIik7CgogICAgICAgICAgICAgICAgICBfdGhpczMuZ2V0Q2FydEl0ZW1zKCk7CiAgICAgICAgICAgICAgICB9IC8vdGhpcy4kcm91dGVyLmdvKDApOwogICAgICAgICAgICAgICAgLy90aGlzLnJlbG9hZCgpOwoKCiAgICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICAgIF90aGlzMy5yZWxvYWQoKTsKCiAgICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNoYW5nZVN0YXRlOiBmdW5jdGlvbiBjaGFuZ2VTdGF0ZSgpIHsKICAgICAgaWYgKHRoaXMuY2hhbmdlU3RhdGUgPT0gdHJ1ZSkgewogICAgICAgIHRoaXMuY2hhbmdlU3RhdGUgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNoYW5nZVN0YXRlID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIGNsZWFyU3RvY2s6IGZ1bmN0aW9uIGNsZWFyU3RvY2soKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIGNvbmZpcm1hdGlvbiwgaSwgcHJvZHVjdFRpdGxlLCBudW0sIHN0b2NrLCBhZnRlciwgX3JlczMsIHJlczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGNvbmZpcm1hdGlvbiA9IGNvbmZpcm0oIkFyZSB5b3Ugc3VyZSB0byBjb25maXJtIHRoZSB0cmFuc2FjdGlvbj8iKTsKCiAgICAgICAgICAgICAgICBpZiAoIWNvbmZpcm1hdGlvbikgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpID0gMDsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgaWYgKCEoaSA8IF90aGlzNC5jYXJ0SXRlbXMubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDIzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBwcm9kdWN0VGl0bGUgPSBfdGhpczQuY2FydEl0ZW1zW2ldLnRpdGxlOwogICAgICAgICAgICAgICAgbnVtID0gX3RoaXM0LmNhcnRJdGVtc1tpXS5hZGRRdWFudGl0eTsKICAgICAgICAgICAgICAgIHN0b2NrID0gX3RoaXM0LmNhcnRJdGVtc1tpXS5zdG9jazsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb2R1Y3RUaXRsZSk7CgogICAgICAgICAgICAgICAgaWYgKCEobnVtID4gc3RvY2spKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vZW5zdXJlIGV2ZXJ5IGl0ZW0ncyBzdG9jayBpcyBlbm9naHQgdG8gY2hlY2tvdXQKICAgICAgICAgICAgICAgIGFsZXJ0KCJwbGVhc2UgbWludXMgdGhlIHF1YW50aXR5IG9mIiArIHByb2R1Y3RUaXRsZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBhZnRlciA9IHN0b2NrIC0gbnVtOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxNjsKICAgICAgICAgICAgICAgIHJldHVybiBQcm9kdWN0RGF0YVNlcnZpY2UuZGVsZXRlUHJvZHVjdE51bWJlcihwcm9kdWN0VGl0bGUsIGFmdGVyKTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIF9yZXMzID0gX2NvbnRleHQ0LnNlbnQ7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJEYXRhU2VydmljZS5kZWxldGVJdGVtKF90aGlzNC5maXJzdG5hbWUsIF90aGlzNC5sYXN0bmFtZSwgcHJvZHVjdFRpdGxlKTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0NC5zZW50OwoKICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICBfdGhpczQucmVsb2FkKCk7CgogICAgICAgICAgICAgICAgX3RoaXM0LiRyb3V0ZXIuZ28oLTEpOwoKICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRVc2VyRGV0YWlsKCk7CiAgICB0aGlzLmdldENhcnRJdGVtcygpOwogIH0KfTs="},{"version":3,"sources":["cart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\n\n    <div v-if=\"cartItems.length > 0 && loginState\">\n        <BackButton></BackButton>\n        <div id=\"page-wrap\">\n            <h1>Shopping Cart</h1>\n            <div v-for=\"(item,index) in cartItems\" :key=\"index\">\n                <div class=\"product-container\">\n                    <img class=\"product-image\" v-lazy=\"'/static/'+item.image\" alt=\"\">\n                    <div class=\"details-wrap\">\n                        <h3>{{ item.title }}</h3>\n                        <p>${{ item.price }}</p>\n                    </div>\n                    <div class=\"edit-quantity\">\n                        <button class=\"edit-btn\" @click=\"editCart('minus',item)\">-</button>\n                        <input class=\"edit-text\" type=\"text\" v-model=\"item.addQuantity\">\n                        <button class=\"edit-btn\" @click=\"editCart('add',item)\">+</button>\n                    </div>\n                    <button class=\"remove-from-cart\" @click=\"removeItem(item.title)\">Remove From Cart</button>\n                </div>\n            </div>\n            <div class=\"price-text\">\n                <span class=\"total-price\">Total Price: ${{computedPrice | currency('$') }}</span>\n            </div>\n            <div class=\"proceed-transaction\">\n                <button class=\"checkout-button\" @click=\"clearStock()\">Confirm The Transaction</button>\n            </div>\n        </div>\n    </div>\n\n    \n    <div v-else-if=\"cartItems.length == 0\">\n    <BackButton></BackButton>\n        <div id=\"page-wrap\">\n            <h1>Shopping Cart</h1>\n            <p>You haven't added anything to your cart yet!</p>\n        </div>\n    </div>\n\n    <div v-else-if=\"!loginState\">\n\n        <BackButton></BackButton>\n        <div id=\"page-wrap\">\n            <h1>Shopping Cart</h1>\n            <p>You are not logged in! Please log in your account!</p>\n        </div>\n    </div>\n\n</template>\n\n\n<script>\nimport BackButton from \"./../components/BackButton.vue\";\nimport userDataService from \"../services/userDataService\";\nimport ProductDataService from \"../services/ProductDataService\"; // product URL request\n\n\n\nexport default {\n    inject: ['reload'],\n    name: \"cart\",\n    components: {\n        BackButton\n    },\n    data() {\n        return {\n            email: \"\",\n            firstname: \"\",\n            lastname: \"\",\n            cartItems: [],\n            loginState: false,\n        }\n    },\n    computed: {\n        computedPrice () {\n            let money = 0;\n            this.cartItems.forEach( (item) => {\n                money += parseFloat(item.price)*parseInt(item.addQuantity);\n            })\n            return money;\n        }\n\n    },\n    methods: {\n\n        getUserDetail() {\n            let base64 = require(\"js-base64\").Base64;\n            this.firstname = this.$cookies.get(\"firstname\");\n            this.lastname = this.$cookies.get(\"lastname\");\n            this.email = this.$cookies.get(\"username\");\n            this.firstname = base64.decode(this.firstname);\n            this.lastname = base64.decode(this.lastname);\n            this.email = base64.decode(this.email);\n            this.loginState = this.$cookies.get(\"state\");\n\n            // console.log(this.firstname);\n            // console.log(this.email);\n        },\n        async getCartItems() {\n            //get the user from the backend\n            let data = await userDataService.getCartList(this.firstname, this.lastname);\n            this.cartItems = data.data.cartlist;\n        },\n\n        async removeItem(productTitle) {\n\n            console.log(productTitle);\n            let res = await userDataService.deleteItem(this.firstname, this.lastname, productTitle);\n            if (res.status ==\"0\") {\n                console.log(\"delete succ\");\n                this.getCartItems();\n            }\n            //this.$router.go(0);\n            this.reload();\n          \n        },\n\n        async editCart (flag, item) {\n\n            let editNumber = item.addQuantity;\n            let productTitle = item.title;\n            if (flag == 'minus' && item.addQuantity >= 2) {\n                editNumber--;\n                //this.reload();\n                let res = await userDataService.updateItemNumber(this.firstname, this.lastname, item.title, editNumber);\n                if(res.status == \"0\") {\n                    console.log(\"update succ\");\n                    this.getCartItems();\n                }\n            } else if (flag == 'add' && item.stock > item.addQuantity) {\n                editNumber++;\n                //this.reload();\n                let res = await userDataService.updateItemNumber(this.firstname, this.lastname, item.title, editNumber);\n                if(res.status == \"0\") {\n                    console.log(\"update succ\");\n                    this.getCartItems();\n                }\n            } else if (flag == 'minus' && item.addQuantity == 1) {\n                let res = await userDataService.deleteItem(this.firstname, this.lastname, productTitle);\n                if (res.status ==\"0\") {\n                    console.log(\"delete succ\");\n                    this.getCartItems();\n                }\n                //this.$router.go(0);\n                //this.reload();\n                \n            }\n\n            this.reload();\n\n        },\n        changeState() {\n            if(this.changeState == true) {\n                this.changeState = false;\n            } else {\n                this.changeState = true;\n            }\n        },\n        async clearStock() {\n            let confirmation = confirm(\"Are you sure to confirm the transaction?\");\n            if (confirmation) {\n                //clear the user cartlist and product number in the user data and product stock data\n                for (let i = 0; i < this.cartItems.length; i++) {\n                    let productTitle = this.cartItems[i].title;\n                    let num = this.cartItems[i].addQuantity;\n                    let stock = this.cartItems[i].stock;\n                    console.log(productTitle);\n                    if (num > stock) {\n                        //ensure every item's stock is enoght to checkout\n                        alert(\"please minus the quantity of\"+productTitle);\n                        return;\n                    } else {\n                        let after = stock - num;\n                        let res = await ProductDataService.deleteProductNumber(productTitle, after);\n                    }\n                    let res = await userDataService.deleteItem(this.firstname, this.lastname, productTitle);\n\n                }\n                this.reload();\n                this.$router.go(-1);\n\n            }\n\n        }\n\n\n    },\n    mounted() {\n        this.getUserDetail();\n        this.getCartItems();\n    }\n\n}\n</script>\n\n\n<style scoped>\n\n  #page-wrap {\n    margin: auto;\n    max-width: 1020px;\n    min-height: 100vh;\n    \n  }\n\n  .total-price {\n    font-weight: bold;\n    font-size: 25px;\n    margin-left: 75%;\n  }\n\n    .checkout-button {\n        background-color: #f05d23;\n        width: 35%;\n        margin-top: 65px;\n        margin-left: 30%;\n  }\n\n  h1 {\n    border-bottom: 1px solid black;\n    margin: 0;\n    margin-top: 16px;\n    padding: 16px;\n  }\n\n\n  .product-container {\n    align-content: 'center';\n    border-bottom: 1px solid #ddd;\n    display: flex;\n    padding: 16px;\n    width: 100%;\n  }\n\n    .product-image {\n    flex: 1;\n    height: 100px;\n    margin: auto;\n    max-width: 100px;\n  }\n\n    .details-wrap {\n    padding: 0 16px;\n    flex: 3;\n  }\n\n\n    .remove-from-cart {\n    flex: 1;\n    margin: auto;\n    max-width: 180px;\n  }\n\n  .edit-quantity {\n      flex: 1;\n      margin: auto;\n  }\n\n  .edit-btn {\n    border-radius: 5px;\n    font-size: 15px;\n    padding: 6px;\n  }\n\n  .edit-text {\n    max-width: 18px;\n    font-size: 14px;\n    margin-left: 1px;\n    margin-right: 1px;\n  }\n\n   .input-sub,.input-add{\n    min-width: 40px;\n    height: 100%;\n    border: 0;\n    color: #605F5F;\n    text-align: center;\n    font-size: 16px;\n    overflow: hidden;\n    display: inline-block;\n    background: #f0f0f0;\n  }\n\n.select-ipt {\n    display: inline-block;\n    padding:0 3px;\n    width: 30px;\n    min-width: 30px;\n    text-align: center;\n\n}\n\n\n\n</style>\n"],"sourceRoot":"src/views"}]}