{"remainingRequest":"/Users/drx/Documents/GitHub/WebDev_G8/client/node_modules/babel-loader/lib/index.js!/Users/drx/Documents/GitHub/WebDev_G8/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/drx/Documents/GitHub/WebDev_G8/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/drx/Documents/GitHub/WebDev_G8/client/src/components/ChangePassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/drx/Documents/GitHub/WebDev_G8/client/src/components/ChangePassword.vue","mtime":1621868556549},{"path":"/Users/drx/Documents/GitHub/WebDev_G8/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/drx/Documents/GitHub/WebDev_G8/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/drx/Documents/GitHub/WebDev_G8/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/drx/Documents/GitHub/WebDev_G8/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9kcngvRG9jdW1lbnRzL0dpdEh1Yi9XZWJEZXZfRzgvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgdXNlckRhdGFTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL3VzZXJEYXRhU2VydmljZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcm5hbWU6ICIiLAogICAgICBwYXNzd29yZDogIiIsCiAgICAgIG5ld1Bhc3N3b3JkOiAiIiwKICAgICAgY3VycmVudFBhc3N3b3JkOiAiIiwKICAgICAgc2VlbjogIiIsCiAgICAgIHVuc2VlbkltZzogcmVxdWlyZSgiLi4vYXNzZXRzL3NlZTAucG5nIiksCiAgICAgIHNlZW5JbWc6IHJlcXVpcmUoIi4uL2Fzc2V0cy9zZWUxLnBuZyIpLAogICAgICBwd2RUeXBlOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIHRoZSBmb2xsb3dpbmcgdGhyZWUgZnVuY3Rpb25zIGFyZSB1c2VkIHRvIHN3aXRjaCBleWUgcGljdHVyZQogICAgLy8gQWxzbyBzd2l0Y2ggc2hvd24gcGFzc3dvcmQgdHlwZSBhbmQgdW5zaG93biBwYXNzd29yZCB0eXBlCiAgICBjaGFuZ2VUeXBlOiBmdW5jdGlvbiBjaGFuZ2VUeXBlKCkgewogICAgICB0aGlzLnNlZW4gPSAhdGhpcy5zZWVuOwogICAgICB0aGlzLnB3ZFR5cGUgPSAhdGhpcy5wd2RUeXBlOwogICAgfSwKICAgIGhvdmVyRXllOiBmdW5jdGlvbiBob3ZlckV5ZShldmVudCkgewogICAgICB0aGlzLnNlZW4gPSAhdGhpcy5zZWVuOwogICAgfSwKICAgIG91dEV5ZTogZnVuY3Rpb24gb3V0RXllKGV2ZW50KSB7CiAgICAgIHRoaXMuc2VlbiA9ICF0aGlzLnNlZW47CiAgICB9LAogICAgLy8gdGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGNhaG5nZSBwYXNzd29yZC4KICAgIHBhc3N3b3JkQ2hhbmdlOiBmdW5jdGlvbiBwYXNzd29yZENoYW5nZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIGNvbmZpcm1hdGlvbiwgYmFzZTY0LCByZXN1bHQsIHJlcywgY2hhbmdlUmVzdWx0LCByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb25maXJtYXRpb24gPSBjb25maXJtKCJDaGFuZ2VkIGNvbmZpcm1lZD8iKTsKCiAgICAgICAgICAgICAgICBpZiAoIWNvbmZpcm1hdGlvbikgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghKF90aGlzLmN1cnJlbnRQYXNzd29yZCAhPSAiIiAmJiBfdGhpcy5uZXdQYXNzd29yZCAhPSAiIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBiYXNlNjQgPSByZXF1aXJlKCJqcy1iYXNlNjQiKS5CYXNlNjQ7CiAgICAgICAgICAgICAgICBfdGhpcy51c2VybmFtZSA9IF90aGlzLiRjb29raWVzLmdldCgndXNlcm5hbWUnKTsKICAgICAgICAgICAgICAgIF90aGlzLnVzZXJuYW1lID0gYmFzZTY0LmRlY29kZShfdGhpcy51c2VybmFtZSk7CiAgICAgICAgICAgICAgICBfdGhpcy5wYXNzd29yZCA9IF90aGlzLmN1cnJlbnRQYXNzd29yZDsgLy91c2UgbWQ1IHRvIHNhdmUgcGFzc3dvcmQKICAgICAgICAgICAgICAgIC8vIGNoZWNrIHRoZSBvbGQgcGFzc3dvcmQgaXMgY29ycmVjdAoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJEYXRhU2VydmljZS5nZXRMb2dpbkRldGFpbChfdGhpcy51c2VybmFtZSwgX3RoaXMuJG1kNShfdGhpcy5wYXNzd29yZCkpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgcmVzID0gcmVzdWx0LmRhdGE7CgogICAgICAgICAgICAgICAgaWYgKCFyZXMuY2hlY2tlZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIHJldHVybiB1c2VyRGF0YVNlcnZpY2UuY2hhbmdlUGFzc3dvcmQoX3RoaXMudXNlcm5hbWUsIF90aGlzLiRtZDUoX3RoaXMubmV3UGFzc3dvcmQpKTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIGNoYW5nZVJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IGNoYW5nZVJlc3VsdC5kYXRhOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOyAvLyBkaXNwbGF5IHRoZSBtZXNzYWdlIHRvIHJlbWluZGVyIHVzZXJzCgogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnJlc3VsdC5saXN0Lm5Nb2RpZmllZCA9PSAxKSB7CiAgICAgICAgICAgICAgICAgIGFsZXJ0KCJzdWNjZXNzZnVsbHkgY2hhbmdlZCB5b3VyIHBhc3N3b3JkIik7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBhbGVydChyZXNwb25zZS5tZXNzYWdlKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgIGFsZXJ0KCJUaGUgb2xkIHBhc3N3b3JkIGlzIG5vdCBjb3JyZWN0LCBwbGVhc2UgdHJ5IGFnYWluIik7CgogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICAgIGFsZXJ0KCJUaGUgY3VycmVudCBwYXNzd29yZCBhbmQgbmV3IHBhc3N3b3JkIGNvdWxkIGJlIGVtcHR5Iik7CgogICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["ChangePassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAkBA,OAAA,eAAA,MAAA,6BAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAIA,MAAA,WAAA,EAAA,EAJA;AAKA,MAAA,eAAA,EAAA,EALA;AAOA,MAAA,IAAA,EAAA,EAPA;AAQA,MAAA,SAAA,EAAA,OAAA,CAAA,oBAAA,CARA;AASA,MAAA,OAAA,EAAA,OAAA,CAAA,oBAAA,CATA;AAUA,MAAA,OAAA,EAAA;AAVA,KAAA;AAYA,GAdA;AAgBA,EAAA,OAAA,EAAA;AACA;AACA;AACA,IAAA,UAAA,EAAA,sBAAA;AACA,WAAA,IAAA,GAAA,CAAA,KAAA,IAAA;AACA,WAAA,OAAA,GAAA,CAAA,KAAA,OAAA;AACA,KANA;AAOA,IAAA,QAAA,EAAA,kBAAA,KAAA,EAAA;AACA,WAAA,IAAA,GAAA,CAAA,KAAA,IAAA;AACA,KATA;AAUA,IAAA,MAAA,EAAA,gBAAA,KAAA,EAAA;AACA,WAAA,IAAA,GAAA,CAAA,KAAA,IAAA;AACA,KAZA;AAaA;AACA,IAAA,cAdA,4BAcA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,gBAAA,YAFA,GAEA,OAAA,CAAA,oBAAA,CAFA;;AAAA,qBAGA,YAHA;AAAA;AAAA;AAAA;;AAAA,sBAIA,KAAA,CAAA,eAAA,IAAA,EAAA,IAAA,KAAA,CAAA,WAAA,IAAA,EAJA;AAAA;AAAA;AAAA;;AAKA,gBAAA,MALA,GAKA,OAAA,CAAA,WAAA,CAAA,CAAA,MALA;AAMA,gBAAA,KAAA,CAAA,QAAA,GAAA,KAAA,CAAA,QAAA,CAAA,GAAA,CAAA,UAAA,CAAA;AACA,gBAAA,KAAA,CAAA,QAAA,GAAA,MAAA,CAAA,MAAA,CAAA,KAAA,CAAA,QAAA,CAAA;AACA,gBAAA,KAAA,CAAA,QAAA,GAAA,KAAA,CAAA,eAAA,CARA,CAUA;AACA;;AAXA;AAAA,uBAYA,eAAA,CAAA,cAAA,CAAA,KAAA,CAAA,QAAA,EAAA,KAAA,CAAA,IAAA,CAAA,KAAA,CAAA,QAAA,CAAA,CAZA;;AAAA;AAYA,gBAAA,MAZA;AAaA,gBAAA,GAbA,GAaA,MAAA,CAAA,IAbA;;AAAA,qBAcA,GAAA,CAAA,OAdA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAgBA,eAAA,CAAA,cAAA,CAAA,KAAA,CAAA,QAAA,EAAA,KAAA,CAAA,IAAA,CAAA,KAAA,CAAA,WAAA,CAAA,CAhBA;;AAAA;AAgBA,gBAAA,YAhBA;AAiBA,gBAAA,QAjBA,GAiBA,YAAA,CAAA,IAjBA;AAkBA,gBAAA,OAAA,CAAA,GAAA,CAAA,QAAA,EAlBA,CAmBA;;AACA,oBAAA,QAAA,CAAA,MAAA,CAAA,IAAA,CAAA,SAAA,IAAA,CAAA,EAAA;AACA,kBAAA,KAAA,CAAA,oCAAA,CAAA;AACA,iBAFA,MAEA;AACA,kBAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA;AACA;;AAxBA;AAAA;;AAAA;AA0BA,gBAAA,KAAA,CAAA,mDAAA,CAAA;;AA1BA;AAAA;AAAA;;AAAA;AA6BA,gBAAA,KAAA,CAAA,sDAAA,CAAA;;AA7BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiCA;AA/CA;AAhBA,CAAA","sourcesContent":["<template>\n  <div>\n    <!-- change password page -->\n    <h1>Change Password</h1>\n    Current password:\n    <input class=\"signin\" type=\"text\" v-if=\"pwdType\" v-model=\"currentPassword\" placeholder=\"Enter your password\"/>\n    <input class=\"signin\" type=\"password\" placeholder=\"Enter your password\" v-model=\"currentPassword\" v-else /><br>\n    <br>\n    New Password: \n    <input class=\"signin\" type=\"text\" v-if=\"pwdType\" v-model=\"newPassword\" placeholder=\"Enter your password\"/>\n    <input class=\"signin\" type=\"password\" placeholder=\"Enter your password\" v-model=\"newPassword\" v-else /><br>\n    <br> \n    <img :src=\"seen ? seenImg : unseenImg\" @click=\"changeType()\" v-on:mouseover=\"hoverEye\" v-on:mouseout=\"outEye\" class=\"icon-eye\" />\n    <button type=\"button\" @click=\"passwordChange\">Change</button>\n  </div>\n</template>\n \n<script>\n  import userDataService from \"../services/userDataService\"\n\n  export default {\n    data() {\n      return {      \n        username: \"\",\n        password:\"\",\n        \n        newPassword:\"\",\n        currentPassword:\"\",\n\n        seen: \"\",\n        unseenImg: require(\"../assets/see0.png\"),  \n        seenImg: require(\"../assets/see1.png\"),   \n        pwdType: false\n      }\n    },\n  \n    methods: {\n      // the following three functions are used to switch eye picture\n      // Also switch shown password type and unshown password type\n      changeType: function() {\n        this.seen = !this.seen;   \n        this.pwdType = !this.pwdType;   \n      },\n      hoverEye: function(event) {\n            this.seen = !this.seen;\n      },\n      outEye: function(event) {\n            this.seen = !this.seen;\n      },\n      // this function is used to cahnge password.\n      async passwordChange(){\n       \n       let confirmation = confirm(\"Changed confirmed?\")\n        if(confirmation){\n      if(this.currentPassword != \"\" && this.newPassword != \"\"){\n        let base64 = require(\"js-base64\").Base64\n        this.username = this.$cookies.get('username');\n        this.username = base64.decode(this.username)\n        this.password = this.currentPassword;\n\n        //use md5 to save password\n        // check the old password is correct\n        var result = await userDataService.getLoginDetail(this.username, this.$md5(this.password));\n        let res = result.data\n        if(res.checked){\n          // update password, put new password into database\n          var changeResult = await userDataService.changePassword(this.username, this.$md5(this.newPassword));\n          let response = changeResult.data;\n          console.log(response)\n          // display the message to reminder users\n          if(response.result.list.nModified ==1){\n              alert(\"successfully changed your password\");\n          }else{\n              alert(response.message);\n          }\n        }else{\n          alert(\"The old password is not correct, please try again\")\n        }\n      }else{\n        alert(\"The current password and new password could be empty\")\n      }\n    }\n\n      },\n  }\n};\n</script>\n \n\n<style>\n.icon-eye{\n    height: 30px;\n    width: 30px;\n    position: absolute;\n    left: 38%;\n    top: 48.5%;\n}\n</style>"],"sourceRoot":"src/components"}]}