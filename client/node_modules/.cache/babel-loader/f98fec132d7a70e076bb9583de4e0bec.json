{"remainingRequest":"/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/node_modules/babel-loader/lib/index.js!/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/src/components/ChangePassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/src/components/ChangePassword.vue","mtime":1622038821000},{"path":"/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/node_modules/cache-loader/dist/cjs.js","mtime":1622038821000},{"path":"/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/node_modules/babel-loader/lib/index.js","mtime":1622038821000},{"path":"/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/node_modules/cache-loader/dist/cjs.js","mtime":1622038821000},{"path":"/Users/mark/Desktop/Job-hunting/做过的项目/phone-sales/client/node_modules/vue-loader/lib/index.js","mtime":1622038821000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9tYXJrL0Rlc2t0b3AvSm9iLWh1bnRpbmcvXHU1MDVBXHU4RkM3XHU3Njg0XHU5ODc5XHU3NkVFL3Bob25lLXNhbGVzL2NsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHVzZXJEYXRhU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy91c2VyRGF0YVNlcnZpY2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICBuZXdQYXNzd29yZDogIiIsCiAgICAgIGN1cnJlbnRQYXNzd29yZDogIiIsCiAgICAgIHNlZW46ICIiLAogICAgICB1bnNlZW5JbWc6IHJlcXVpcmUoIi4uL2Fzc2V0cy9zZWUwLnBuZyIpLAogICAgICBzZWVuSW1nOiByZXF1aXJlKCIuLi9hc3NldHMvc2VlMS5wbmciKSwKICAgICAgcHdkVHlwZTogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyB0aGUgZm9sbG93aW5nIHRocmVlIGZ1bmN0aW9ucyBhcmUgdXNlZCB0byBzd2l0Y2ggZXllIHBpY3R1cmUKICAgIC8vIEFsc28gc3dpdGNoIHNob3duIHBhc3N3b3JkIHR5cGUgYW5kIHVuc2hvd24gcGFzc3dvcmQgdHlwZQogICAgY2hhbmdlVHlwZTogZnVuY3Rpb24gY2hhbmdlVHlwZSgpIHsKICAgICAgdGhpcy5zZWVuID0gIXRoaXMuc2VlbjsKICAgICAgdGhpcy5wd2RUeXBlID0gIXRoaXMucHdkVHlwZTsKICAgIH0sCiAgICBob3ZlckV5ZTogZnVuY3Rpb24gaG92ZXJFeWUoZXZlbnQpIHsKICAgICAgdGhpcy5zZWVuID0gIXRoaXMuc2VlbjsKICAgIH0sCiAgICBvdXRFeWU6IGZ1bmN0aW9uIG91dEV5ZShldmVudCkgewogICAgICB0aGlzLnNlZW4gPSAhdGhpcy5zZWVuOwogICAgfSwKICAgIC8vIHRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBjYWhuZ2UgcGFzc3dvcmQuCiAgICBwYXNzd29yZENoYW5nZTogZnVuY3Rpb24gcGFzc3dvcmRDaGFuZ2UoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjb25maXJtYXRpb24sIGJhc2U2NCwgcmVzdWx0LCByZXMsIGNoYW5nZVJlc3VsdCwgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgY29uZmlybWF0aW9uID0gY29uZmlybSgiQ2hhbmdlZCBjb25maXJtZWQ/Iik7CgogICAgICAgICAgICAgICAgaWYgKCFjb25maXJtYXRpb24pIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIShfdGhpcy5jdXJyZW50UGFzc3dvcmQgIT0gIiIgJiYgX3RoaXMubmV3UGFzc3dvcmQgIT0gIiIpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgYmFzZTY0ID0gcmVxdWlyZSgianMtYmFzZTY0IikuQmFzZTY0OwogICAgICAgICAgICAgICAgX3RoaXMudXNlcm5hbWUgPSBfdGhpcy4kY29va2llcy5nZXQoJ3VzZXJuYW1lJyk7CiAgICAgICAgICAgICAgICBfdGhpcy51c2VybmFtZSA9IGJhc2U2NC5kZWNvZGUoX3RoaXMudXNlcm5hbWUpOwogICAgICAgICAgICAgICAgX3RoaXMucGFzc3dvcmQgPSBfdGhpcy5jdXJyZW50UGFzc3dvcmQ7IC8vdXNlIG1kNSB0byBzYXZlIHBhc3N3b3JkCiAgICAgICAgICAgICAgICAvLyBjaGVjayB0aGUgb2xkIHBhc3N3b3JkIGlzIGNvcnJlY3QKCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiB1c2VyRGF0YVNlcnZpY2UuZ2V0TG9naW5EZXRhaWwoX3RoaXMudXNlcm5hbWUsIF90aGlzLiRtZDUoX3RoaXMucGFzc3dvcmQpKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHJlcyA9IHJlc3VsdC5kYXRhOwoKICAgICAgICAgICAgICAgIGlmICghcmVzLmNoZWNrZWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICByZXR1cm4gdXNlckRhdGFTZXJ2aWNlLmNoYW5nZVBhc3N3b3JkKF90aGlzLnVzZXJuYW1lLCBfdGhpcy4kbWQ1KF90aGlzLm5ld1Bhc3N3b3JkKSk7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBjaGFuZ2VSZXN1bHQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBjaGFuZ2VSZXN1bHQuZGF0YTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsgLy8gZGlzcGxheSB0aGUgbWVzc2FnZSB0byByZW1pbmRlciB1c2VycwoKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5yZXN1bHQubGlzdC5uTW9kaWZpZWQgPT0gMSkgewogICAgICAgICAgICAgICAgICBhbGVydCgic3VjY2Vzc2Z1bGx5IGNoYW5nZWQgeW91ciBwYXNzd29yZCIpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgYWxlcnQocmVzcG9uc2UubWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIxOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgICBhbGVydCgiVGhlIG9sZCBwYXNzd29yZCBpcyBub3QgY29ycmVjdCwgcGxlYXNlIHRyeSBhZ2FpbiIpOwoKICAgICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI0OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICAgICAgICBhbGVydCgiVGhlIGN1cnJlbnQgcGFzc3dvcmQgYW5kIG5ldyBwYXNzd29yZCBjb3VsZCBiZSBlbXB0eSIpOwoKICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["ChangePassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAkBA,OAAA,eAAA,MAAA,6BAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAIA,MAAA,WAAA,EAAA,EAJA;AAKA,MAAA,eAAA,EAAA,EALA;AAOA,MAAA,IAAA,EAAA,EAPA;AAQA,MAAA,SAAA,EAAA,OAAA,CAAA,oBAAA,CARA;AASA,MAAA,OAAA,EAAA,OAAA,CAAA,oBAAA,CATA;AAUA,MAAA,OAAA,EAAA;AAVA,KAAA;AAYA,GAdA;AAgBA,EAAA,OAAA,EAAA;AACA;AACA;AACA,IAAA,UAAA,EAAA,sBAAA;AACA,WAAA,IAAA,GAAA,CAAA,KAAA,IAAA;AACA,WAAA,OAAA,GAAA,CAAA,KAAA,OAAA;AACA,KANA;AAOA,IAAA,QAAA,EAAA,kBAAA,KAAA,EAAA;AACA,WAAA,IAAA,GAAA,CAAA,KAAA,IAAA;AACA,KATA;AAUA,IAAA,MAAA,EAAA,gBAAA,KAAA,EAAA;AACA,WAAA,IAAA,GAAA,CAAA,KAAA,IAAA;AACA,KAZA;AAaA;AACA,IAAA,cAdA,4BAcA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,gBAAA,YAFA,GAEA,OAAA,CAAA,oBAAA,CAFA;;AAAA,qBAGA,YAHA;AAAA;AAAA;AAAA;;AAAA,sBAIA,KAAA,CAAA,eAAA,IAAA,EAAA,IAAA,KAAA,CAAA,WAAA,IAAA,EAJA;AAAA;AAAA;AAAA;;AAKA,gBAAA,MALA,GAKA,OAAA,CAAA,WAAA,CAAA,CAAA,MALA;AAMA,gBAAA,KAAA,CAAA,QAAA,GAAA,KAAA,CAAA,QAAA,CAAA,GAAA,CAAA,UAAA,CAAA;AACA,gBAAA,KAAA,CAAA,QAAA,GAAA,MAAA,CAAA,MAAA,CAAA,KAAA,CAAA,QAAA,CAAA;AACA,gBAAA,KAAA,CAAA,QAAA,GAAA,KAAA,CAAA,eAAA,CARA,CAUA;AACA;;AAXA;AAAA,uBAYA,eAAA,CAAA,cAAA,CAAA,KAAA,CAAA,QAAA,EAAA,KAAA,CAAA,IAAA,CAAA,KAAA,CAAA,QAAA,CAAA,CAZA;;AAAA;AAYA,gBAAA,MAZA;AAaA,gBAAA,GAbA,GAaA,MAAA,CAAA,IAbA;;AAAA,qBAcA,GAAA,CAAA,OAdA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAgBA,eAAA,CAAA,cAAA,CAAA,KAAA,CAAA,QAAA,EAAA,KAAA,CAAA,IAAA,CAAA,KAAA,CAAA,WAAA,CAAA,CAhBA;;AAAA;AAgBA,gBAAA,YAhBA;AAiBA,gBAAA,QAjBA,GAiBA,YAAA,CAAA,IAjBA;AAkBA,gBAAA,OAAA,CAAA,GAAA,CAAA,QAAA,EAlBA,CAmBA;;AACA,oBAAA,QAAA,CAAA,MAAA,CAAA,IAAA,CAAA,SAAA,IAAA,CAAA,EAAA;AACA,kBAAA,KAAA,CAAA,oCAAA,CAAA;AACA,iBAFA,MAEA;AACA,kBAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA;AACA;;AAxBA;AAAA;;AAAA;AA0BA,gBAAA,KAAA,CAAA,mDAAA,CAAA;;AA1BA;AAAA;AAAA;;AAAA;AA6BA,gBAAA,KAAA,CAAA,sDAAA,CAAA;;AA7BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiCA;AA/CA;AAhBA,CAAA","sourcesContent":["<template>\n  <div>\n    <!-- change password page -->\n    <h1>Change Password</h1>\n    Current password:\n    <input class=\"signin\" type=\"text\" v-if=\"pwdType\" v-model=\"currentPassword\" placeholder=\"Enter your password\"/>\n    <input class=\"signin\" type=\"password\" placeholder=\"Enter your password\" v-model=\"currentPassword\" v-else /><br>\n    <br>\n    New Password: \n    <input class=\"signin\" type=\"text\" v-if=\"pwdType\" v-model=\"newPassword\" placeholder=\"Enter your password\"/>\n    <input class=\"signin\" type=\"password\" placeholder=\"Enter your password\" v-model=\"newPassword\" v-else /><br>\n    <br> \n    <img :src=\"seen ? seenImg : unseenImg\" @click=\"changeType()\" v-on:mouseover=\"hoverEye\" v-on:mouseout=\"outEye\" class=\"icon-eye\" />\n    <button type=\"button\" @click=\"passwordChange\">Change</button>\n  </div>\n</template>\n \n<script>\n  import userDataService from \"../services/userDataService\"\n\n  export default {\n    data() {\n      return {      \n        username: \"\",\n        password:\"\",\n        \n        newPassword:\"\",\n        currentPassword:\"\",\n\n        seen: \"\",\n        unseenImg: require(\"../assets/see0.png\"),  \n        seenImg: require(\"../assets/see1.png\"),   \n        pwdType: false\n      }\n    },\n  \n    methods: {\n      // the following three functions are used to switch eye picture\n      // Also switch shown password type and unshown password type\n      changeType: function() {\n        this.seen = !this.seen;   \n        this.pwdType = !this.pwdType;   \n      },\n      hoverEye: function(event) {\n            this.seen = !this.seen;\n      },\n      outEye: function(event) {\n            this.seen = !this.seen;\n      },\n      // this function is used to cahnge password.\n      async passwordChange(){\n       \n       let confirmation = confirm(\"Changed confirmed?\")\n        if(confirmation){\n      if(this.currentPassword != \"\" && this.newPassword != \"\"){\n        let base64 = require(\"js-base64\").Base64\n        this.username = this.$cookies.get('username');\n        this.username = base64.decode(this.username)\n        this.password = this.currentPassword;\n\n        //use md5 to save password\n        // check the old password is correct\n        var result = await userDataService.getLoginDetail(this.username, this.$md5(this.password));\n        let res = result.data\n        if(res.checked){\n          // update password, put new password into database\n          var changeResult = await userDataService.changePassword(this.username, this.$md5(this.newPassword));\n          let response = changeResult.data;\n          console.log(response)\n          // display the message to reminder users\n          if(response.result.list.nModified ==1){\n              alert(\"successfully changed your password\");\n          }else{\n              alert(response.message);\n          }\n        }else{\n          alert(\"The old password is not correct, please try again\")\n        }\n      }else{\n        alert(\"The current password and new password could be empty\")\n      }\n    }\n\n      },\n  }\n};\n</script>\n \n\n<style>\n.icon-eye{\n    height: 30px;\n    width: 30px;\n    position: absolute;\n    left: 38%;\n    top: 48.5%;\n}\n</style>"],"sourceRoot":"src/components"}]}